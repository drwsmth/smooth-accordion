"use strict";function ownKeys(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(a,!0).forEach((function(t){_defineProperty(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ownKeys(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function _defineProperty(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}var Accordion=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,e),t=Object.assign(e.defaults(),t),Object.assign(this,t),this.getInstance()}return _createClass(e,null,[{key:"defaults",value:function(){return{hideByDefault:!0,hideExceptFirst:!0,singularMode:!1,singularAllowHide:!0,useSchema:!1,classGroup:".accordion__group",classItem:".accordion",classPanel:".accordion__panel",classButton:".accordion__button"}}}]),_createClass(e,[{key:"getElements",value:function(e){return{accordion:e,panel:e.querySelector(this.classPanel),button:e.querySelector(this.classButton)}}},{key:"setAttributes",value:function(e,t){var a=e.accordion,n=(e.button,e.panel);"expand"===t?(a.setAttribute("data-active",!0),n.setAttribute("aria-expanded",!0)):(a.setAttribute("data-active",!1),n.setAttribute("aria-expanded",!1))}},{key:"setSchema",value:function(e){e.accordion.setAttribute("itemprop","mainEntity"),e.button.setAttribute("itemprop","name"),e.panel.setAttribute("itemprop","acceptedAnswer")}},{key:"animatorCore",value:function(t,a){var n,r=e.getMaxHeight(t),i={duration:300,easing:"cubic-bezier(.4,0,.2,1)"};"collapse"===a&&(t.style.maxHeight=r,n=[{maxHeight:r},{maxHeight:"0px"}]),"expand"===a&&(t.style.maxHeight="0px",n=[{maxHeight:"0px"},{maxHeight:r}]),t.animate(n,i).onfinish=function(){"collapse"===a&&(r="0px"),"expand"===a&&(r=null),t.style.maxHeight=r}}},{key:"collapse",value:function(e,t){e.accordion;var a=e.panel;e.toggle;this.setAttributes(e),this.animatorCore(a,"collapse")}},{key:"expand",value:function(e,t){e.accordion;var a=e.panel;e.toggle;this.setAttributes(e,"expand"),this.animatorCore(a,"expand")}},{key:"handleClick",value:function(e){var t=this;e.group.addEventListener("click",(function(a){if(a.target.closest(t.classButton)){a.preventDefault();var n=a.target.closest(t.classItem),r=e.accordions;for(var i in r){var o=r[i],c=o.element,s=o.maxHeight,l=c.accordion;c.panel,c.toggle;l==n?(!1===t.singularAllowHide&&"false"===n.dataset.active&&t.expand(c,s),!0===t.singularAllowHide&&("false"===n.dataset.active?t.expand(c,s):t.collapse(c,s))):!0===t.singularMode&&"true"===l.dataset.active&&t.collapse(c,s)}}}))}},{key:"handleLoad",value:function(e){var t=this;window.addEventListener("load",(function(a){var n=e.accordions;for(var r in n)r=n[r].element,t.useSchema&&t.setSchema(r),!0===t.hideByDefault?t.collapse(r):t.setAttributes(r,"expand")}))}},{key:"getInstance",value:function(){var e=this,t=document.querySelectorAll(this.classGroup);0!==t.length&&(this.generate=t,this.allObjects.forEach((function(t){e.handleLoad(t),e.handleClick(t)})))}},{key:"generate",set:function(e){var t=this,a=[];e.forEach((function(e){var n=[];e.querySelectorAll(t.classItem).forEach((function(e){n.push({element:t.getElements(e)})}));var r={accordions:_objectSpread({},n),group:e};n=r,a.push(n),r=null})),this.allObjects=a}}],[{key:"getMaxHeight",value:function(e){return"".concat(e.scrollHeight,"px")}}]),e}();
